<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Scam Reports</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>

<body>
    <h1>Scam Reports</h1>
    <input type="text" id="search" placeholder="Search by company name...">
    <div id="results"></div>

    <script>
        const API_URL = 'http://<YOUR_EC2_IP>:<PORT>'; // ‚Üê replace this with your actual backend URL

        async function fetchReports(query = '') {
            try {
                const res = await fetch(`${API_URL}/scams?search=${encodeURIComponent(query)}`);
                const data = await res.json();
                const container = document.getElementById('results');
                container.innerHTML = '';

                if (!data.length) {
                    container.innerHTML = '<p>No scam reports found.</p>';
                    return;
                }

                const table = document.createElement('table');
                table.innerHTML = `
          <tr>
            <th>Company</th>
            <th>Job Details</th>
            <th>Description</th>
          </tr>
        `;
                data.forEach(report => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
            <td>${report.company_name}</td>
            <td>${report.job_details}</td>
            <td>${report.description}</td>
          `;
                    table.appendChild(row);
                });

                container.appendChild(table);
            } catch (err) {
                console.error(err);
                document.getElementById('results').innerHTML = '<p>Failed to load reports.</p>';
            }
        }

        document.getElementById('search').addEventListener('input', e => {
            fetchReports(e.target.value);
        });

        fetchReports(); // Initial load
    </script>
</body>

</html>