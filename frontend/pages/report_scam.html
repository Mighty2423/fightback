<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Report a Scam</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>

<body>
    <h1>Report a Scam</h1>

    <form id="scamForm">
        <label>Company Name: <input type="text" name="company_name" required></label><br>
        <label>Job Details: <input type="text" name="job_details"></label><br>
        <label>Description:<br><textarea name="description" required></textarea></label><br>
        <button type="submit">Submit Report</button>
    </form>

    <p id="status"></p>

    <script>
        const API_URL = 'http://<YOUR_EC2_IP>:<PORT>'; // ‚Üê replace this

        document.getElementById('scamForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const form = e.target;
            const data = {
                company_name: form.company_name.value.trim(),
                job_details: form.job_details.value.trim(),
                description: form.description.value.trim()
            };

            try {
                const res = await fetch(`${API_URL}/report`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const msg = await res.json();
                document.getElementById('status').textContent = msg.message || 'Submitted!';
                form.reset();
            } catch (err) {
                console.error(err);
                document.getElementById('status').textContent = 'Failed to submit report.';
            }
        });
    </script>
</body>

</html>